(this["webpackJsonpreact-canvas-annotation-example"]=this["webpackJsonpreact-canvas-annotation-example"]||[]).push([[0],{43:function(e,t,n){e.exports=n.p+"static/media/img.c13c8705.jpg"},45:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var i=n(4),a=n(5);function o(){var e=Object(i.a)(["\n  body {\n    background: linear-gradient(to bottom, #323232 0%, #3F3F3F 40%, #1C1C1C 150%), linear-gradient(to top, rgba(255,255,255,0.40) 0%, rgba(0,0,0,0.25) 200%);\n    background-blend-mode: multiply;\n  }\n  main {\n    ","\n  }\n  h1 {\n    ","\n  }\n"]);return o=function(){return e},e}var r=Object(a.a)(o(),{height:"100vh",width:"100vw",color:"#fff"},{fontSize:"1.5rem",textAlign:"center"}),s=n(0),c=n.n(s),l=n(14),u=n.n(l),d=n(23),g=n.n(d),h=n(37),v=n(8),f=n(27);function y(){var e=Object(i.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}var P=function(){},C=function(e){var t=e.className,n=e.children,i=e.onClick,a=void 0===i?P:i,o=e.isPressed,r=void 0!==o&&o,s=e.disabled,l=void 0!==s&&s;return c.a.createElement(E,{className:t,onClick:a,isPressed:r,disabled:l},n)},E=a.b.button(y(),{transitionProperty:"background-color, border-color, color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{cursor:"pointer",borderColor:"#a0aec0",borderWidth:"1px",padding:"0.5rem",":hover, :focus":{backgroundColor:"#97266d"}},{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",borderRadius:"0.125rem"},Object(f.a)("isPressed",{backgroundColor:"#702459"}),Object(f.a)("disabled",{cursor:"not-allowed",opacity:"0.25"}));C.className=E;var O,m,A,T,I,b,R=C,_=n(28),w=n(19),S=n(18),p=n(44),D=n(6),L=n(3),x=n(1),M=n(2),k=n(17),U=n(12),j=n(7),V=n(25),N=n.n(V),B=n(38),G=n.n(B),z=n(39),H=n.n(z),F=n(26);function W(){var e=Object(i.a)(["\n  ","\n  cursor: none;\n"]);return W=function(){return e},e}function Z(){var e=Object(i.a)(["\n  ","\n"]);return Z=function(){return e},e}function X(){var e=Object(i.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return X=function(){return e},e}function Y(){var e=Object(i.a)(["\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}function J(){var e=Object(i.a)(["\n  ","\n"]);return J=function(){return e},e}function K(){var e=Object(i.a)([""]);return K=function(){return e},e}function q(e){return{type:b.UPDATE_CUSTOM_CURSOR_STYLE,payload:{customCursorStyle:e}}}!function(e){e.DEFAULT="DEFAULT",e.MOVE="MOVE",e.RESIZE="RESIZE",e.ADD="ADD",e.CANCEL="CANCEL",e.CLOSE="CLOSE",e.GRAB="GRAB",e.GRABBING="GRABBING"}(A||(A={})),function(e){e.RECTANGLE="RECTANGLE",e.POLYGON="POLYGON"}(T||(T={})),function(e){e.RESIZE="resize",e.MOUSE_UP="mouseup",e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_WHEEL="wheel",e.KEY_DOWN="keydown",e.KEY_PRESS="keypress",e.KEY_UP="keyup",e.FOCUS="focus"}(I||(I={})),function(e){e.UPDATE_SUGGESTED_LABEL_LIST="@@UPDATE_SUGGESTED_LABEL_LIST",e.UPDATE_REJECTED_SUGGESTED_LABEL_LIST="@@UPDATE_REJECTED_SUGGESTED_LABEL_LIST",e.UPDATE_OBJECT_DETECTOR_STATUS="@@UPDATE_OBJECT_DETECTOR_STATUS",e.UPDATE_POSE_DETECTOR_STATUS="@@UPDATE_POSE_DETECTOR_STATUS",e.UPDATE_DISABLED_AI_FLAG="@@UPDATE_DISABLED_AI_FLAG",e.UPDATE_PROJECT_DATA="@@UPDATE_PROJECT_DATA",e.UPDATE_WINDOW_SIZE="@@UPDATE_WINDOW_SIZE",e.UPDATE_CUSTOM_CURSOR_STYLE="@@UPDATE_CUSTOM_CURSOR_STYLE",e.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS="@@UPDATE_PREVENT_CUSTOM_CURSOR_STATUS",e.UPDATE_IMAGE_DRAG_MODE_STATUS="@@UPDATE_IMAGE_DRAG_MODE_STATUS",e.UPDATE_ZOOM="@@UPDATE_ZOOM",e.UPDATE_ACTIVE_IMAGE_INDEX="@@UPDATE_ACTIVE_IMAGE_INDEX",e.UPDATE_IMAGE_DATA_BY_ID="@@UPDATE_IMAGE_DATA_BY_ID",e.ADD_IMAGES_DATA="@@ADD_IMAGES_DATA",e.UPDATE_IMAGES_DATA="@@UPDATE_IMAGES_DATA",e.UPDATE_ACTIVE_LABEL_NAME_ID="@@UPDATE_ACTIVE_LABEL_NAME_ID",e.UPDATE_ACTIVE_LABEL_TYPE="@@UPDATE_ACTIVE_LABEL_TYPE",e.UPDATE_ACTIVE_LABEL_ID="@@UPDATE_ACTIVE_LABEL_ID",e.UPDATE_HIGHLIGHTED_LABEL_ID="@@UPDATE_HIGHLIGHTED_LABEL_ID",e.UPDATE_LABEL_NAMES="@@UPDATE_LABEL_NAMES",e.UPDATE_FIRST_LABEL_CREATED_FLAG="@@UPDATE_FIRST_LABEL_CREATED_FLAG"}(b||(b={}));var Q=function e(){Object(M.a)(this,e)};Q.CANVAS_MIN_MARGIN_PX=20,Q.MIN_ZOOM=1,Q.MAX_ZOOM=4,Q.ZOOM_STEP=.1,Q.TRANSLATION_STEP_PX=20;var $={windowSize:null,customCursorStyle:A.DEFAULT,preventCustomCursor:!1,imageDragMode:!1,zoom:Q.MIN_ZOOM};var ee={activeLabelNameId:null,activeLabelType:null,activeLabelId:null,highlightedLabelId:null,imagesData:[],firstLabelCreatedFlag:!1,labels:[]};var te=Object(U.b)({general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.UPDATE_WINDOW_SIZE:return Object(x.a)(Object(x.a)({},e),{},{windowSize:t.payload.windowSize});case b.UPDATE_CUSTOM_CURSOR_STYLE:return Object(x.a)(Object(x.a)({},e),{},{customCursorStyle:t.payload.customCursorStyle});case b.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS:return Object(x.a)(Object(x.a)({},e),{},{preventCustomCursor:t.payload.preventCustomCursor});case b.UPDATE_IMAGE_DRAG_MODE_STATUS:return Object(x.a)(Object(x.a)({},e),{},{imageDragMode:t.payload.imageDragMode});case b.UPDATE_ZOOM:return Object(x.a)(Object(x.a)({},e),{},{zoom:t.payload.zoom});default:return e}},labels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.UPDATE_ACTIVE_LABEL_NAME_ID:return Object(x.a)(Object(x.a)({},e),{},{activeLabelNameId:t.payload.activeLabelNameId});case b.UPDATE_ACTIVE_LABEL_ID:return Object(x.a)(Object(x.a)({},e),{},{activeLabelId:t.payload.activeLabelId});case b.UPDATE_HIGHLIGHTED_LABEL_ID:return Object(x.a)(Object(x.a)({},e),{},{highlightedLabelId:t.payload.highlightedLabelId});case b.UPDATE_ACTIVE_LABEL_TYPE:return Object(x.a)(Object(x.a)({},e),{},{activeLabelType:t.payload.activeLabelType});case b.UPDATE_IMAGE_DATA_BY_ID:return Object(x.a)(Object(x.a)({},e),{},{imagesData:e.imagesData.map((function(e){return"0"===t.payload.id?t.payload.newImageData:e}))});case b.ADD_IMAGES_DATA:return Object(x.a)(Object(x.a)({},e),{},{imagesData:e.imagesData.concat(t.payload.imageData)});case b.UPDATE_IMAGES_DATA:return Object(x.a)(Object(x.a)({},e),{},{imagesData:t.payload.imageData});case b.UPDATE_LABEL_NAMES:return Object(x.a)(Object(x.a)({},e),{},{labels:t.payload.labels});default:return e}}});var ne=Object(U.c)(te,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ie=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"init",value:function(){e.handleResize(),window.addEventListener(I.RESIZE,e.handleResize)}}]),e}();ie.handleResize=function(){var e;ne.dispatch((e={width:window.innerWidth,height:window.innerHeight},{type:b.UPDATE_WINDOW_SIZE,payload:{windowSize:e}}))};var ae,oe="M21 11H19.93C19.7068 9.23998 18.9049 7.60408 17.6504 6.34959C16.3959 5.0951 14.76 4.29319 13 4.07V3C13 2.73478 12.8946 2.48043 12.7071 2.29289C12.5196 2.10536 12.2652 2 12 2C11.7348 2 11.4804 2.10536 11.2929 2.29289C11.1054 2.48043 11 2.73478 11 3V4.07C9.23998 4.29319 7.60408 5.0951 6.34959 6.34959C5.0951 7.60408 4.29319 9.23998 4.07 11H3C2.73478 11 2.48043 11.1054 2.29289 11.2929C2.10536 11.4804 2 11.7348 2 12C2 12.2652 2.10536 12.5196 2.29289 12.7071C2.48043 12.8946 2.73478 13 3 13H4.07C4.29319 14.76 5.0951 16.3959 6.34959 17.6504C7.60408 18.9049 9.23998 19.7068 11 19.93V21C11 21.2652 11.1054 21.5196 11.2929 21.7071C11.4804 21.8946 11.7348 22 12 22C12.2652 22 12.5196 21.8946 12.7071 21.7071C12.8946 21.5196 13 21.2652 13 21V19.93C14.76 19.7068 16.3959 18.9049 17.6504 17.6504C18.9049 16.3959 19.7068 14.76 19.93 13H21C21.2652 13 21.5196 12.8946 21.7071 12.7071C21.8946 12.5196 22 12.2652 22 12C22 11.7348 21.8946 11.4804 21.7071 11.2929C21.5196 11.1054 21.2652 11 21 11ZM17 13H17.91C17.7016 14.2264 17.1171 15.3578 16.2374 16.2374C15.3578 17.1171 14.2264 17.7016 13 17.91V17C13 16.7348 12.8946 16.4804 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16C11.7348 16 11.4804 16.1054 11.2929 16.2929C11.1054 16.4804 11 16.7348 11 17V17.91C9.77356 17.7016 8.64222 17.1171 7.76256 16.2374C6.8829 15.3578 6.29842 14.2264 6.09 13H7C7.26522 13 7.51957 12.8946 7.70711 12.7071C7.89464 12.5196 8 12.2652 8 12C8 11.7348 7.89464 11.4804 7.70711 11.2929C7.51957 11.1054 7.26522 11 7 11H6.09C6.29842 9.77356 6.8829 8.64222 7.76256 7.76256C8.64222 6.8829 9.77356 6.29842 11 6.09V7C11 7.26522 11.1054 7.51957 11.2929 7.70711C11.4804 7.89464 11.7348 8 12 8C12.2652 8 12.5196 7.89464 12.7071 7.70711C12.8946 7.51957 13 7.26522 13 7V6.09C14.2264 6.29842 15.3578 6.8829 16.2374 7.76256C17.1171 8.64222 17.7016 9.77356 17.91 11H17C16.7348 11 16.4804 11.1054 16.2929 11.2929C16.1054 11.4804 16 11.7348 16 12C16 12.2652 16.1054 12.5196 16.2929 12.7071C16.4804 12.8946 16.7348 13 17 13ZM12 11C11.8022 11 11.6089 11.0586 11.4444 11.1685C11.28 11.2784 11.1518 11.4346 11.0761 11.6173C11.0004 11.8 10.9806 12.0011 11.0192 12.1951C11.0578 12.3891 11.153 12.5673 11.2929 12.7071C11.4327 12.847 11.6109 12.9422 11.8049 12.9808C11.9989 13.0194 12.2 12.9996 12.3827 12.9239C12.5654 12.8482 12.7216 12.72 12.8315 12.5556C12.9414 12.3911 13 12.1978 13 12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11Z",re=(O={},Object(D.a)(O,A.MOVE,"M10.9873 14.1734L11.047 20.4242L10.1004 19.4938C9.94253 19.3386 9.72945 19.2525 9.50806 19.2544C9.28667 19.2563 9.0751 19.346 8.9199 19.5039C8.7647 19.6618 8.67858 19.8749 8.68049 20.0963C8.68239 20.3177 8.77217 20.5292 8.93006 20.6844L11.3114 23.0252C11.3901 23.1007 11.4829 23.1601 11.5845 23.1999C11.7893 23.2825 12.0185 23.2805 12.2219 23.1944C12.3228 23.1528 12.4145 23.0919 12.4919 23.015L14.8326 20.6337C14.9878 20.4758 15.074 20.2627 15.0721 20.0413C15.0702 19.8199 14.9804 19.6083 14.8225 19.4531C14.6646 19.2979 14.4515 19.2118 14.2301 19.2137C14.0087 19.2156 13.7972 19.3054 13.642 19.4633L12.7115 20.4099L12.6637 14.159C12.6617 13.9367 12.5716 13.7243 12.4131 13.5684C12.2545 13.4126 12.0406 13.3261 11.8183 13.328C11.596 13.33 11.3835 13.4201 11.2277 13.5786C11.0719 13.7372 10.9854 13.9511 10.9873 14.1734V14.1734ZM3.18614 11.047L4.11657 10.1004C4.27177 9.94253 4.35789 9.72945 4.35599 9.50806C4.35408 9.28667 4.26431 9.07511 4.10642 8.91991C3.94852 8.76471 3.73544 8.67859 3.51405 8.68049C3.29266 8.6824 3.0811 8.77217 2.9259 8.93007L0.58518 11.3114C0.509651 11.3901 0.450284 11.4829 0.410438 11.5845C0.327862 11.7893 0.329834 12.0185 0.415923 12.2219C0.457511 12.3228 0.518465 12.4145 0.595337 12.4919L2.97669 14.8327C3.13458 14.9879 3.34766 15.074 3.56905 15.0721C3.79044 15.0702 4.00201 14.9804 4.1572 14.8225C4.3124 14.6646 4.39852 14.4515 4.39662 14.2301C4.39471 14.0087 4.30494 13.7972 4.14705 13.642L3.20046 12.7115L9.45135 12.6637C9.56155 12.6632 9.67056 12.6409 9.77209 12.598C9.87363 12.5552 9.96568 12.4927 10.0429 12.4141C10.1202 12.3355 10.1811 12.2424 10.2222 12.1401C10.2633 12.0379 10.2837 11.9285 10.2823 11.8183C10.2818 11.7081 10.2595 11.5991 10.2167 11.4975C10.1738 11.396 10.1113 11.304 10.0327 11.2267C9.95412 11.1495 9.86101 11.0885 9.75875 11.0474C9.6565 11.0064 9.54712 10.9859 9.43693 10.9873L3.18614 11.047ZM19.4531 8.78786C19.2979 8.94575 19.2118 9.15883 19.2137 9.38022C19.2156 9.60161 19.3054 9.81318 19.4633 9.96837L20.4099 10.8988L14.159 10.9467C13.9367 10.9486 13.7243 11.0387 13.5684 11.1973C13.4126 11.3558 13.3261 11.5698 13.328 11.7921C13.33 12.0144 13.4201 12.2268 13.5786 12.3826C13.7372 12.5385 13.9511 12.6249 14.1734 12.623L20.4242 12.5633L19.4938 13.5099C19.3386 13.6678 19.2524 13.8809 19.2544 14.1023C19.2563 14.3237 19.346 14.5352 19.5039 14.6904C19.6618 14.8456 19.8749 14.9318 20.0963 14.9299C20.3177 14.928 20.5292 14.8382 20.6844 14.6803L23.0252 12.2989C23.1007 12.2202 23.1601 12.1275 23.1999 12.0259C23.2825 11.821 23.2805 11.5918 23.1944 11.3884C23.1528 11.2876 23.0919 11.1958 23.015 11.1184L20.6337 8.7777C20.4758 8.6225 20.2627 8.53638 20.0413 8.53828C19.8199 8.54019 19.6083 8.62996 19.4531 8.78786ZM12.0259 0.410442C11.821 0.327866 11.5918 0.329839 11.3884 0.415928C11.2876 0.457516 11.1958 0.518469 11.1184 0.595342L8.7777 2.97669C8.6225 3.13458 8.53638 3.34766 8.53828 3.56905C8.54019 3.79044 8.62996 4.00201 8.78785 4.15721C8.94575 4.31241 9.15883 4.39853 9.38022 4.39662C9.60161 4.39472 9.81317 4.30494 9.96837 4.14705L10.8988 3.20046L10.9467 9.45135C10.9472 9.56155 10.9695 9.67056 11.0123 9.7721C11.0552 9.87363 11.1177 9.96568 11.1963 10.0429C11.2749 10.1202 11.368 10.1811 11.4702 10.2222C11.5725 10.2633 11.6819 10.2837 11.7921 10.2823C11.9023 10.2818 12.0113 10.2595 12.1128 10.2167C12.2143 10.1738 12.3064 10.1113 12.3836 10.0327C12.4609 9.95412 12.5218 9.86101 12.5629 9.75876C12.604 9.6565 12.6244 9.54712 12.623 9.43693L12.5633 3.18614L13.5099 4.11658C13.6678 4.27178 13.8809 4.3579 14.1023 4.35599C14.3237 4.35409 14.5352 4.26431 14.6904 4.10642C14.8456 3.94853 14.9318 3.73545 14.9299 3.51406C14.9279 3.29267 14.8382 3.0811 14.6803 2.9259L12.2989 0.585184C12.2202 0.509655 12.1274 0.450288 12.0259 0.410442V0.410442Z"),Object(D.a)(O,A.CANCEL,"M13.41 12L17.71 7.71C17.8983 7.5217 18.0041 7.2663 18.0041 7C18.0041 6.7337 17.8983 6.47831 17.71 6.29C17.5217 6.1017 17.2663 5.99591 17 5.99591C16.7337 5.99591 16.4783 6.1017 16.29 6.29L12 10.59L7.71 6.29C7.5217 6.1017 7.2663 5.99591 7 5.99591C6.7337 5.99591 6.4783 6.1017 6.29 6.29C6.1017 6.47831 5.99591 6.7337 5.99591 7C5.99591 7.2663 6.1017 7.5217 6.29 7.71L10.59 12L6.29 16.29C6.19627 16.383 6.12188 16.4936 6.07111 16.6154C6.02034 16.7373 5.9942 16.868 5.9942 17C5.9942 17.132 6.02034 17.2627 6.07111 17.3846C6.12188 17.5064 6.19627 17.617 6.29 17.71C6.38296 17.8037 6.49356 17.8781 6.61542 17.9289C6.73728 17.9797 6.86799 18.0058 7 18.0058C7.13201 18.0058 7.26272 17.9797 7.38458 17.9289C7.50644 17.8781 7.61704 17.8037 7.71 17.71L12 13.41L16.29 17.71C16.383 17.8037 16.4936 17.8781 16.6154 17.9289C16.7373 17.9797 16.868 18.0058 17 18.0058C17.132 18.0058 17.2627 17.9797 17.3846 17.9289C17.5064 17.8781 17.617 17.8037 17.71 17.71C17.8037 17.617 17.8781 17.5064 17.9289 17.3846C17.9797 17.2627 18.0058 17.132 18.0058 17C18.0058 16.868 17.9797 16.7373 17.9289 16.6154C17.8781 16.4936 17.8037 16.383 17.71 16.29L13.41 12Z"),Object(D.a)(O,A.GRAB,oe),Object(D.a)(O,A.GRABBING,oe),O),se=j.a.svg(ae||(ae=K())),ce=function(e){var t=e.d,n=Object(p.a)(e,["d"]);return c.a.createElement(se,Object.assign({viewBox:"0 0 24 24"},n),c.a.createElement("path",{d:t}))},le=function e(){Object(M.a)(this,e)};le.isLoading=!1,le.viewPortActionsDisabled=!1;var ue,de=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getPreventCustomCursorStatus",value:function(){return ne.getState().general.preventCustomCursor}},{key:"getImageDragModeStatus",value:function(){return ne.getState().general.imageDragMode}},{key:"getCustomCursorStyle",value:function(){return ne.getState().general.customCursorStyle}},{key:"getZoom",value:function(){return ne.getState().general.zoom}}]),e}();!function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT",e.TOP_RIGHT="TOP_RIGHT",e.TOP_LEFT="TOP_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.CENTER="CENTER"}(ue||(ue={}));var ge,he=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"convertDirectionToVector",value:function(e){switch(e){case ue.RIGHT:return{x:1,y:0};case ue.LEFT:return{x:-1,y:0};case ue.TOP:return{x:0,y:1};case ue.BOTTOM:return{x:0,y:-1};case ue.TOP_RIGHT:return{x:1,y:1};case ue.TOP_LEFT:return{x:-1,y:1};case ue.BOTTOM_RIGHT:return{x:1,y:-1};case ue.BOTTOM_LEFT:return{x:-1,y:-1};case ue.CENTER:return{x:0,y:0};default:return null}}}]),e}(),ve=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getSize",value:function(e){return e?{width:e.width,height:e.height}:null}}]),e}(),fe=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"snapValueToRange",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"isValueInRange",value:function(e,t,n){return e>=t&&e<=n}}]),e}(),ye=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"add",value:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}},{key:"subtract",value:function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{key:"multiply",value:function(e,t){return{x:e.x*t,y:e.y*t}}},{key:"getEuclidianDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}}]),e}(),Pe=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getRatio",value:function(e){return e?e.width/e.height:null}},{key:"intersect",value:function(e,t){return e&&t?!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y):null}},{key:"isPointInside",value:function(e,t){return e&&t?e.x<t.x&&e.x+e.width>t.x&&e.y<t.y&&e.y+e.height>t.y:null}},{key:"getRectWithCenterAndSize",value:function(e,t){return Object(x.a)({x:e.x-.5*t.width,y:e.y-.5*t.height},t)}},{key:"fitInsideRectWithRatio",value:function(t,n){if(e.getRatio(t)<n){var i=t.width/n;return{x:t.x,y:t.y+(t.height-i)/2,width:t.width,height:i}}var a=t.height*n;return{x:t.x+(t.width-a)/2,y:t.y,width:a,height:t.height}}},{key:"resizeRect",value:function(e,t,n){var i=Object(x.a)({},e);switch(t){case ue.RIGHT:i.width+=n.x;break;case ue.BOTTOM_RIGHT:i.width+=n.x,i.height+=n.y;break;case ue.BOTTOM:i.height+=n.y;break;case ue.TOP_RIGHT:i.width+=n.x,i.y+=n.y,i.height-=n.y;break;case ue.TOP:i.y+=n.y,i.height-=n.y;break;case ue.TOP_LEFT:i.x+=n.x,i.width-=n.x,i.y+=n.y,i.height-=n.y;break;case ue.LEFT:i.x+=n.x,i.width-=n.x;break;case ue.BOTTOM_LEFT:i.x+=n.x,i.width-=n.x,i.height+=n.y}return i.width<0&&(i.x=i.x+i.width,i.width=-i.width),i.height<0&&(i.y=i.y+i.height,i.height=-i.height),i}},{key:"translate",value:function(e,t){return Object(x.a)(Object(x.a)({},e),{},{x:e.x+t.x,y:e.y+t.y})}},{key:"expand",value:function(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width+2*t.x,height:e.height+2*t.y}}},{key:"scaleRect",value:function(e,t){return{x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}}},{key:"mapRectToAnchors",value:function(e){return[{type:ue.TOP_LEFT,position:{x:e.x,y:e.y}},{type:ue.TOP,position:{x:e.x+.5*e.width,y:e.y}},{type:ue.TOP_RIGHT,position:{x:e.x+e.width,y:e.y}},{type:ue.LEFT,position:{x:e.x,y:e.y+.5*e.height}},{type:ue.RIGHT,position:{x:e.x+e.width,y:e.y+.5*e.height}},{type:ue.BOTTOM_LEFT,position:{x:e.x,y:e.y+e.height}},{type:ue.BOTTOM,position:{x:e.x+.5*e.width,y:e.y+e.height}},{type:ue.BOTTOM_RIGHT,position:{x:e.x+e.width,y:e.y+e.height}}]}},{key:"snapPointToRect",value:function(t,n){return e.isPointInside(n,t)?t:{x:fe.snapValueToRange(t.x,n.x,n.x+n.width),y:fe.snapValueToRange(t.y,n.y,n.y+n.height)}}}]),e}(),Ce=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"scale",value:function(e,t){return{width:e.width*t,height:e.height*t}}}]),e}(),Ee=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"updateViewPortSize",value:function(){le.editor&&(le.viewPortSize={width:le.editor.offsetWidth,height:le.editor.offsetHeight})}},{key:"updateDefaultViewPortImageRect",value:function(){if(le.viewPortSize&&le.image){var e={x:Q.CANVAS_MIN_MARGIN_PX,y:Q.CANVAS_MIN_MARGIN_PX},t=Object(x.a)({x:0,y:0},ve.getSize(le.image)),n=Object(x.a)({x:0,y:0},le.viewPortSize),i=Pe.expand(n,ye.multiply(e,-1));le.defaultRenderImageRect=Pe.fitInsideRectWithRatio(i,Pe.getRatio(t))}}},{key:"calculateViewPortContentSize",value:function(){if(le.viewPortSize&&le.image){var e=le.defaultRenderImageRect,t=Ce.scale(le.defaultRenderImageRect,de.getZoom());return{width:t.width+2*e.x,height:t.height+2*e.y}}return null}},{key:"calculateViewPortContentImageRect",value:function(){if(le.viewPortSize&&le.image){var t=le.defaultRenderImageRect,n=e.calculateViewPortContentSize();return Object(x.a)(Object(x.a)({},t),{},{width:n.width-2*t.x,height:n.height-2*t.y})}return null}},{key:"resizeCanvas",value:function(e){e&&le.canvas&&(le.canvas.width=e.width,le.canvas.height=e.height)}},{key:"resizeViewPortContent",value:function(){var t=e.calculateViewPortContentSize();t&&e.resizeCanvas(t)}},{key:"calculateAbsoluteScrollPosition",value:function(t){var n=e.calculateViewPortContentSize(),i=le.viewPortSize;return{x:t.x*(n.width-i.width),y:t.y*(n.height-i.height)}}},{key:"getRelativeScrollPosition",value:function(){if(le.viewPortScrollbars){var e=le.viewPortScrollbars.getValues();return{x:e.left,y:e.top}}return null}},{key:"getAbsoluteScrollPosition",value:function(){if(le.viewPortScrollbars){var e=le.viewPortScrollbars.getValues();return{x:e.scrollLeft,y:e.scrollTop}}return null}},{key:"setScrollPosition",value:function(e){le.viewPortScrollbars.scrollLeft(e.x),le.viewPortScrollbars.scrollTop(e.y)}},{key:"translateViewPortPosition",value:function(t){if(!le.viewPortActionsDisabled){var n=he.convertDirectionToVector(t),i=ye.multiply(n,Q.TRANSLATION_STEP_PX),a=e.getAbsoluteScrollPosition(),o=ye.add(a,i);e.setScrollPosition(o),tt.fullRender()}}},{key:"setZoom",value:function(e){var t,n=de.getZoom();fe.isValueInRange(e,Q.MIN_ZOOM,Q.MAX_ZOOM)&&e!==n&&ne.dispatch((t=e,{type:b.UPDATE_ZOOM,payload:{zoom:t}}))}}]),e}(),Oe=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getEventType",value:function(e){if(!e)return null;switch(e.type){case I.MOUSE_DOWN:return I.MOUSE_DOWN;case I.MOUSE_UP:return I.MOUSE_UP;case I.MOUSE_MOVE:return I.MOUSE_MOVE;default:return null}}}]),e}(),me=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,[{key:"update",value:function(e){if(e.event)switch(Oe.getEventType(e.event)){case I.MOUSE_MOVE:this.mouseMoveHandler(e);break;case I.MOUSE_UP:this.mouseUpHandler();break;case I.MOUSE_DOWN:this.mouseDownHandler(e)}}},{key:"mouseDownHandler",value:function(e){var t=e.event;this.startScrollPosition=e.absoluteViewPortContentScrollPosition,this.mouseStartPosition={x:t.screenX,y:t.screenY},ne.dispatch(q(A.GRABBING)),le.canvas.style.cursor="none"}},{key:"mouseUpHandler",value:function(){this.startScrollPosition=null,this.mouseStartPosition=null,ne.dispatch(q(A.GRAB)),le.canvas.style.cursor="none"}},{key:"mouseMoveHandler",value:function(e){if(this.startScrollPosition&&this.mouseStartPosition){var t=e.event,n={x:t.screenX,y:t.screenY},i=ye.subtract(n,this.mouseStartPosition),a=ye.subtract(this.startScrollPosition,i);Ee.setScrollPosition(a),ne.dispatch(q(A.GRABBING))}else ne.dispatch(q(A.GRAB));le.canvas.style.cursor="none"}}]),e}();!function(e){e.LOAD_LABEL_NAMES="LOAD_LABEL_NAMES",e.UPDATE_LABEL_NAMES="UPDATE_LABEL_NAMES",e.SUGGEST_LABEL_NAMES="SUGGEST_LABEL_NAMES",e.LOAD_IMAGES="LOAD_IMAGES",e.LOAD_AI_MODEL="LOAD_AI_MODEL",e.EXPORT_LABELS="EXPORT_LABELS",e.INSERT_LABEL_NAMES="INSERT_LABEL_NAMES",e.EXIT_PROJECT="EXIT_PROJECT",e.LOADER="LOADER"}(ge||(ge={}));var Ae=function e(){Object(M.a)(this,e)};Ae.GITHUB_URL="https://github.com/SkalskiP",Ae.MEDIUM_URL="https://medium.com/@piotr.skalski92",Ae.PATREON_URL="https://www.patreon.com/make_sense",Ae.TOP_NAVIGATION_BAR_HEIGHT_PX=35,Ae.EDITOR_BOTTOM_NAVIGATION_BAR_HEIGHT_PX=41,Ae.EDITOR_TOP_NAVIGATION_BAR_HEIGHT_PX=41,Ae.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX=(Ae.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX=24)+300+1,Ae.TOOLKIT_TAB_HEIGHT_PX=40,Ae.TOOLBOX_PANEL_WIDTH_PX=51,Ae.EDITOR_MIN_WIDTH=900,Ae.EDITOR_MIN_HEIGHT=500,Ae.PRIMARY_COLOR="#F8C182",Ae.SECONDARY_COLOR="#EC77FF",Ae.DARK_THEME_FIRST_COLOR="#171717",Ae.DARK_THEME_SECOND_COLOR="#282828",Ae.DARK_THEME_THIRD_COLOR="#4c4c4c",Ae.DARK_THEME_FORTH_COLOR="#262c2f",Ae.CROSS_HAIR_THICKNESS_PX=1,Ae.CROSS_HAIR_COLOR="#fff",Ae.RESIZE_HANDLE_DIMENSION_PX=8,Ae.RESIZE_HANDLE_HOVER_DIMENSION_PX=16,Ae.CLOSEABLE_POPUPS=[ge.LOAD_IMAGES,ge.EXPORT_LABELS,ge.EXIT_PROJECT,ge.UPDATE_LABEL_NAMES];var Te=function e(){Object(M.a)(this,e),this.lineThickness=2,this.lineActiveColor=Ae.PRIMARY_COLOR,this.lineInactiveColor="#fff",this.anchorSize={width:Ae.RESIZE_HANDLE_DIMENSION_PX,height:Ae.RESIZE_HANDLE_DIMENSION_PX},this.anchorHoverSize={width:Ae.RESIZE_HANDLE_HOVER_DIMENSION_PX,height:Ae.RESIZE_HANDLE_HOVER_DIMENSION_PX},this.suggestedAnchorDetectionSize={width:100,height:100},this.activeAnchorColor=Ae.SECONDARY_COLOR,this.inactiveAnchorColor=Ae.DARK_THEME_SECOND_COLOR};function Ie(e){return{type:b.UPDATE_ACTIVE_LABEL_ID,payload:{activeLabelId:e}}}function be(e){return{type:b.UPDATE_HIGHLIGHTED_LABEL_ID,payload:{highlightedLabelId:e}}}function Re(e,t){return{type:b.UPDATE_IMAGE_DATA_BY_ID,payload:{id:e,newImageData:t}}}var _e=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getLabelNames",value:function(){return ne.getState().labels.labels}},{key:"getActiveLabelNameId",value:function(){return ne.getState().labels.activeLabelNameId}},{key:"getActiveLabelType",value:function(){return ne.getState().labels.activeLabelType}},{key:"getImagesData",value:function(){return ne.getState().labels.imagesData}},{key:"getActiveImageIndex",value:function(){return 0}},{key:"getActiveImageData",value:function(){var t=e.getActiveImageIndex();return null===t?null:e.getImageDataByIndex(t)}},{key:"getImageDataByIndex",value:function(t){return e.getImagesData()[t]}},{key:"getImageDataById",value:function(){return e.getImagesData()[0]}},{key:"getActiveLabelId",value:function(){return ne.getState().labels.activeLabelId}},{key:"getHighlightedLabelId",value:function(){return ne.getState().labels.highlightedLabelId}},{key:"getActiveRectLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:N()(e.getActiveImageData().labelRects,{id:t})}},{key:"getActivePolygonLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:N()(e.getActiveImageData().labelPolygons,{id:t})}}]),e}(),we=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"deg2rad",value:function(e){return e*Math.PI/180}},{key:"rad2deg",value:function(e){return 180*e/Math.PI}}]),e}(),Se=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"clearCanvas",value:function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}},{key:"drawLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#111111",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.getContext("2d");o.save(),o.strokeStyle=i,o.lineWidth=a,o.lineCap="round",o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(n.x+1,n.y+1),o.stroke(),o.restore()}},{key:"drawRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=e.getContext("2d");a.save(),a.strokeStyle=n,a.lineWidth=i,a.beginPath(),a.rect(t.x,t.y,t.width,t.height),a.stroke(),a.restore()}},{key:"drawRectWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",i=e.getContext("2d");i.save(),i.fillStyle=n,i.beginPath(),i.rect(t.x,t.y,t.width,t.height),i.fill(),i.restore()}},{key:"shadeEverythingButRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(0, 0, 0, 0.7)",i=e.getContext("2d");i.save(),i.fillStyle=n,i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-out",i.fillRect(t.x,t.y,t.width,t.height),i.restore()}},{key:"drawCircleWithFill",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",a=e.getContext("2d");a.save();var o=we.deg2rad(0),r=we.deg2rad(360);a.fillStyle=i,a.beginPath(),a.arc(t.x,t.y,n,o,r,!1),a.fill(),a.restore()}},{key:"drawCircle",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#ffffff",s=e.getContext("2d"),c=we.deg2rad(i),l=we.deg2rad(a);s.save(),s.strokeStyle=r,s.lineWidth=o,s.beginPath(),s.arc(t.x,t.y,n,c,l,!1),s.stroke(),s.restore()}},{key:"drawPolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=e.getContext("2d");a.save(),a.strokeStyle=n,a.lineWidth=i,a.beginPath(),a.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)a.lineTo(t[o].x,t[o].y);a.closePath(),a.stroke(),a.restore()}},{key:"drawPolygonWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",i=e.getContext("2d");i.save(),i.fillStyle=n,i.beginPath(),i.moveTo(t[0].x,t[0].y);for(var a=1;a<t.length;a++)i.lineTo(t[a].x,t[a].y);i.closePath(),i.fill(),i.restore()}},{key:"drawText",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"center",s=e.getContext("2d");s.save(),s.fillStyle=a,s.textAlign=r,s.textBaseline="middle",s.font=(o?"bold ":"")+n+"px Arial",s.fillText(t,i.x,i.y),s.restore()}},{key:"getRandomRGBColor",value:function(){return"rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+")"}},{key:"hexToRGB",value:function(e,t){var n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return t?"rgba("+n+", "+i+", "+a+", "+t+")":"rgb("+n+", "+i+", "+a+")"}}]),e}(),pe=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getDistanceFromLine",value:function(e,t){return e.start.x!==e.end.x||e.start.y!==e.end.y?Math.abs((e.end.y-e.start.y)*t.x-(e.end.x-e.start.x)*t.y+e.end.x*e.start.y-e.end.y*e.start.x)/Math.sqrt(Math.pow(e.end.y-e.start.y,2)+Math.pow(e.end.x-e.start.x,2)):null}},{key:"getCenter",value:function(e){return{x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2}}}]),e}(),De=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"calculateImageScale",value:function(e){return e.realImageSize.width/e.viewPortContentImageRect.width}},{key:"isMouseOverImage",value:function(e){return Pe.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)}},{key:"isMouseOverCanvas",value:function(e){return Pe.isPointInside(Object(x.a)({x:0,y:0},e.viewPortContentSize),e.mousePositionOnViewPortContent)}},{key:"transferPolygonFromImageToViewPortContent",value:function(t,n){return t.map((function(t){return e.transferPointFromImageToViewPortContent(t,n)}))}},{key:"transferPointFromImageToViewPortContent",value:function(t,n){var i=e.calculateImageScale(n);return ye.add(ye.multiply(t,1/i),n.viewPortContentImageRect)}},{key:"transferPolygonFromViewPortContentToImage",value:function(t,n){return t.map((function(t){return e.transferPointFromViewPortContentToImage(t,n)}))}},{key:"transferPointFromViewPortContentToImage",value:function(t,n){var i=e.calculateImageScale(n);return ye.multiply(ye.subtract(t,n.viewPortContentImageRect),i)}},{key:"transferRectFromViewPortContentToImage",value:function(t,n){var i=e.calculateImageScale(n);return Pe.translate(Pe.scaleRect(t,1/i),n.viewPortContentImageRect)}},{key:"transferRectFromImageToViewPortContent",value:function(t,n){var i=e.calculateImageScale(n),a={x:-n.viewPortContentImageRect.x,y:-n.viewPortContentImageRect.y};return Pe.scaleRect(Pe.translate(t,a),i)}},{key:"wrapDefaultCursorStyleInCancel",value:function(e){Pe.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)?ne.dispatch(q(A.DEFAULT)):ne.dispatch(q(A.CANCEL))}},{key:"setValueBetweenPixels",value:function(e){return Math.floor(e)+.5}},{key:"setPointBetweenPixels",value:function(t){return{x:e.setValueBetweenPixels(t.x),y:e.setValueBetweenPixels(t.y)}}},{key:"setRectBetweenPixels",value:function(t){var n={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y+t.height},a=e.setPointBetweenPixels(n),o=e.setPointBetweenPixels(i);return{x:a.x,y:a.y,width:o.x-a.x,height:o.y-a.y}}}]),e}();for(var Le=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}})),xe=[],Me=0;Me<256;++Me)xe[Me]=(Me+256).toString(16).substr(1);var ke,Ue,je=function(e,t){var n=t||0,i=xe;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")},Ve=0,Ne=0;var Be=function(e,t,n){var i=t&&n||0,a=t||[],o=(e=e||{}).node||ke,r=void 0!==e.clockseq?e.clockseq:Ue;if(null==o||null==r){var s=Le();null==o&&(o=ke=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==r&&(r=Ue=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:Ne+1,u=c-Ve+(l-Ne)/1e4;if(u<0&&void 0===e.clockseq&&(r=r+1&16383),(u<0||c>Ve)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ve=c,Ne=l,Ue=r;var d=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;a[i++]=d>>>24&255,a[i++]=d>>>16&255,a[i++]=d>>>8&255,a[i++]=255&d;var g=c/4294967296*1e4&268435455;a[i++]=g>>>8&255,a[i++]=255&g,a[i++]=g>>>24&15|16,a[i++]=g>>>16&255,a[i++]=r>>>8|128,a[i++]=255&r;for(var h=0;h<6;++h)a[i+h]=o[h];return t||je(a)};var Ge=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||Le)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[i+o]=a[o];return t||je(a)},ze=Ge;ze.v1=Be,ze.v4=Ge;var He,Fe=ze,We=function(){function e(t){Object(M.a)(this,e),this.canvas=t}return Object(L.a)(e,[{key:"update",value:function(e,t){if(e.event)switch(Oe.getEventType(e.event)){case I.MOUSE_MOVE:this.mouseMoveHandler(e);break;case I.MOUSE_UP:this.mouseUpHandler(e,t);break;case I.MOUSE_DOWN:this.mouseDownHandler(e)}}}]),e}(),Ze=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var i;return Object(M.a)(this,n),(i=t.call(this,e)).config=new Te,i.activePath=[],i.resizeAnchorIndex=null,i.suggestedAnchorPositionOnCanvas=null,i.suggestedAnchorIndexInPolygon=null,i.labelType=T.POLYGON,i}return Object(L.a)(n,[{key:"update",value:function(e,t){if(e.event)switch(Oe.getEventType(e.event)){case I.MOUSE_MOVE:this.mouseMoveHandler(e);break;case I.MOUSE_UP:this.mouseUpHandler(e,t);break;case I.MOUSE_DOWN:this.mouseDownHandler(e)}}},{key:"mouseDownHandler",value:function(e){var t=this;if(De.isMouseOverCanvas(e))if(this.isCreationInProgress()){this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0])?this.addLabelAndFinishCreation(e):this.updateActivelyCreatedLabel(e)}else{var n=this.getPolygonUnderMouse(e);if(n){var i=n.vertices.reduce((function(n,i,a){if(null===n){var o=De.transferPointFromImageToViewPortContent(i,e);if(t.isMouseOverAnchor(e.mousePositionOnViewPortContent,o))return a}return n}),null);if(null!==i)this.startExistingLabelResize(n.id,i);else ne.dispatch(Ie(n.id)),this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)&&this.addSuggestedAnchorToPolygonLabel(e)}else this.updateActivelyCreatedLabel(e)}}},{key:"mouseUpHandler",value:function(e,t){this.isResizeInProgress()&&this.endExistingLabelResize(e,t)}},{key:"mouseMoveHandler",value:function(e){if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent&&(De.isMouseOverImage(e)&&!this.isCreationInProgress())){var t=this.getPolygonUnderMouse(e);if(t&&!this.isResizeInProgress()){_e.getHighlightedLabelId()!==t.id&&ne.dispatch(be(t.id));for(var n=De.transferPolygonFromImageToViewPortContent(t.vertices,e),i=this.mapPointsToLines(n.concat(n[0])),a=0;a<i.length;a++)if(this.isMouseOverLine(e.mousePositionOnViewPortContent,i[a])){this.suggestedAnchorPositionOnCanvas=pe.getCenter(i[a]),this.suggestedAnchorIndexInPolygon=a+1;break}}else null!==_e.getHighlightedLabelId()&&(ne.dispatch(be(null)),this.discardSuggestedPoint())}}},{key:"render",value:function(e){_e.getActiveImageData()&&(this.drawExistingLabels(e),this.drawActivelyCreatedLabel(e),this.drawActivelyResizeLabel(e),this.updateCursorStyle(e),this.drawSuggestedAnchor(e))}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!de.getImageDragModeStatus())if(De.isMouseOverCanvas(e)){if(this.isCreationInProgress()){this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0])&&this.activePath.length>2?ne.dispatch(q(A.CLOSE)):ne.dispatch(q(A.DEFAULT))}else{var t=this.getAnchorUnderMouse(e);this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)?ne.dispatch(q(A.ADD)):this.isResizeInProgress()||t?ne.dispatch(q(A.MOVE)):De.wrapDefaultCursorStyleInCancel(e)}this.canvas.style.cursor="none"}else this.canvas.style.cursor="default"}},{key:"drawActivelyCreatedLabel",value:function(e){var t=this,n=this.activePath.map((function(e){return De.setPointBetweenPixels(e)})),i=n.concat(e.mousePositionOnViewPortContent),a=this.mapPointsToLines(i);Se.drawPolygonWithFill(this.canvas,i,Se.hexToRGB(this.config.lineActiveColor,.2)),a.forEach((function(e){Se.drawLine(t.canvas,e.start,e.end,t.config.lineActiveColor,t.config.lineThickness)})),this.mapPointsToAnchors(n).forEach((function(e){Se.drawRectWithFill(t.canvas,e,t.config.activeAnchorColor)}))}},{key:"drawActivelyResizeLabel",value:function(e){var t=this,n=_e.getActivePolygonLabel();if(n&&this.isResizeInProgress()){var i=Pe.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=n.vertices.map((function(n,a){return a===t.resizeAnchorIndex?i:De.transferPointFromImageToViewPortContent(n,e)}));this.drawPolygon(a,!0)}}},{key:"drawExistingLabels",value:function(e){var t=this,n=_e.getActiveLabelId(),i=_e.getHighlightedLabelId();_e.getActiveImageData().labelPolygons.forEach((function(a){var o=a.id===n||a.id===i,r=De.transferPolygonFromImageToViewPortContent(a.vertices,e);a.id===n&&t.isResizeInProgress()||t.drawPolygon(r,o)}))}},{key:"drawPolygon",value:function(e,t){var n=this,i=t?this.config.lineActiveColor:this.config.lineInactiveColor,a=e.map((function(e){return De.setPointBetweenPixels(e)}));t&&Se.drawPolygonWithFill(this.canvas,a,Se.hexToRGB(i,.2)),Se.drawPolygon(this.canvas,a,i,this.config.lineThickness),t&&this.mapPointsToAnchors(a).forEach((function(e){Se.drawRectWithFill(n.canvas,e,n.config.activeAnchorColor)}))}},{key:"drawSuggestedAnchor",value:function(e){if(this.suggestedAnchorPositionOnCanvas){var t=Pe.getRectWithCenterAndSize(this.suggestedAnchorPositionOnCanvas,this.config.suggestedAnchorDetectionSize);if(Pe.isPointInside(t,e.mousePositionOnViewPortContent)){var n=Pe.getRectWithCenterAndSize(this.suggestedAnchorPositionOnCanvas,this.config.anchorSize);Se.drawRectWithFill(this.canvas,n,this.config.lineInactiveColor)}}}},{key:"updateActivelyCreatedLabel",value:function(e){if(this.isCreationInProgress()){var t=Pe.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);this.activePath.push(t)}else{Pe.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)&&(tt.setViewPortActionsDisabledStatus(!0),this.activePath.push(e.mousePositionOnViewPortContent),ne.dispatch(Ie(null)))}}},{key:"cancelLabelCreation",value:function(){this.activePath=[],tt.setViewPortActionsDisabledStatus(!1)}},{key:"finishLabelCreation",value:function(){this.activePath=[],tt.setViewPortActionsDisabledStatus(!1)}},{key:"addLabelAndFinishCreation",value:function(e){if(this.isCreationInProgress()&&this.activePath.length>2){var t=De.transferPolygonFromViewPortContentToImage(this.activePath,e);this.addPolygonLabel(t),this.finishLabelCreation()}}},{key:"addPolygonLabel",value:function(e){var t=_e.getActiveLabelNameId(),n=_e.getActiveImageData(),i={id:Fe.v4(),labelId:t,vertices:e};n.labelPolygons.push(i),ne.dispatch(Re("0",n)),ne.dispatch(Ie(i.id))}},{key:"startExistingLabelResize",value:function(e,t){ne.dispatch(Ie(e)),this.resizeAnchorIndex=t,tt.setViewPortActionsDisabledStatus(!0)}},{key:"endExistingLabelResize",value:function(e,t){this.applyResizeToPolygonLabel(e,t),this.resizeAnchorIndex=null,tt.setViewPortActionsDisabledStatus(!1)}},{key:"applyResizeToPolygonLabel",value:function(e,t){var n=this,i=_e.getActiveImageData(),a=_e.getActivePolygonLabel();i.labelPolygons=i.labelPolygons.map((function(t){return t.id!==a.id?t:Object(x.a)(Object(x.a)({},t),{},{vertices:t.vertices.map((function(t,i){if(i!==n.resizeAnchorIndex)return t;var a=Pe.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);return De.transferPointFromViewPortContentToImage(a,e)}))})}));var o=i.labelPolygons;t({labelRects:i.labelRects,labelPolygons:o}),ne.dispatch(Re("0",i)),ne.dispatch(Ie(a.id))}},{key:"discardSuggestedPoint",value:function(){this.suggestedAnchorIndexInPolygon=null,this.suggestedAnchorPositionOnCanvas=null}},{key:"addSuggestedAnchorToPolygonLabel",value:function(e){var t=this,n=_e.getActiveImageData(),i=_e.getActivePolygonLabel(),a=De.transferPointFromViewPortContentToImage(this.suggestedAnchorPositionOnCanvas,e),o=Object(x.a)(Object(x.a)({},n),{},{labelPolygons:n.labelPolygons.map((function(e){return e.id!==i.id?e:Object(x.a)(Object(x.a)({},e),{},{vertices:(n=e.vertices,o=t.suggestedAnchorIndexInPolygon,r=a,[].concat(Object(_.a)(n.slice(0,o)),[r],Object(_.a)(n.slice(o))))});var n,o,r}))});ne.dispatch(Re("0",o)),this.startExistingLabelResize(i.id,this.suggestedAnchorIndexInPolygon),this.discardSuggestedPoint()}},{key:"isInProgress",value:function(){return this.isCreationInProgress()||this.isResizeInProgress()}},{key:"isCreationInProgress",value:function(){return null!==this.activePath&&0!==this.activePath.length}},{key:"isResizeInProgress",value:function(){return null!==this.resizeAnchorIndex}},{key:"isMouseOverAnchor",value:function(e,t){return e&&t?Pe.isPointInside(Pe.getRectWithCenterAndSize(t,this.config.anchorSize),e):null}},{key:"isMouseOverLine",value:function(e,t){var n=this.config.anchorHoverSize.width/2,i=Math.min(t.start.x,t.end.x),a=Math.max(t.start.x,t.end.x),o=Math.min(t.start.y,t.end.y),r=Math.max(t.start.y,t.end.y);return i-n<=e.x&&a+n>=e.x&&o-n<=e.y&&r+n>=e.y&&pe.getDistanceFromLine(t,e)<n}},{key:"mapPointsToLines",value:function(e){for(var t=[],n=0;n<e.length-1;n++)t.push({start:e[n],end:e[n+1]});return t}},{key:"mapPointsToAnchors",value:function(e){var t=this;return e.map((function(e){return Pe.getRectWithCenterAndSize(e,t.config.anchorSize)}))}},{key:"getPolygonUnderMouse",value:function(e){for(var t=_e.getActiveImageData().labelPolygons,n=0;n<t.length;n++){for(var i=De.transferPolygonFromImageToViewPortContent(t[n].vertices,e),a=this.mapPointsToLines(i.concat(i[0])),o=0;o<a.length;o++)if(this.isMouseOverLine(e.mousePositionOnViewPortContent,a[o]))return t[n];for(var r=0;r<i.length;r++)if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,i[r]))return t[n]}return null}},{key:"getAnchorUnderMouse",value:function(e){for(var t=_e.getActiveImageData().labelPolygons,n=0;n<t.length;n++)for(var i=De.transferPolygonFromImageToViewPortContent(t[n].vertices,e),a=0;a<i.length;a++)if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,i[a]))return i[a];return null}}]),n}(We),Xe=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){return Object(M.a)(this,n),t.call(this,e)}return Object(L.a)(n,[{key:"mouseMoveHandler",value:function(){}},{key:"mouseDownHandler",value:function(){}},{key:"mouseUpHandler",value:function(){}},{key:"render",value:function(){le.primaryRenderingEngine.drawImage(le.image,Ee.calculateViewPortContentImageRect())}},{key:"drawImage",value:function(e,t){e&&this.canvas&&this.canvas.getContext("2d").drawImage(e,t.x,t.y,t.width,t.height)}},{key:"isInProgress",value:function(){return!1}}]),n}(We);!function(e){e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.UNDECIDED="UNDECIDED"}(He||(He={}));var Ye,Je,Ke,qe,Qe,$e=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var i;return Object(M.a)(this,n),(i=t.call(this,e)).config=new Te,i.mouseDownHandler=function(e){var t=De.isMouseOverImage(e);if(De.isMouseOverCanvas(e)){var n=i.getRectUnderMouse(e);if(n){var a=i.calculateRectRelativeToActiveImage(n.rect,e),o=i.getAnchorUnderMouseByRect(a,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);o&&n.status===He.ACCEPTED?(ne.dispatch(Ie(n.id)),i.startRectResize(o)):_e.getHighlightedLabelId()?ne.dispatch(Ie(_e.getHighlightedLabelId())):i.startRectCreation(e.mousePositionOnViewPortContent)}else t&&i.startRectCreation(e.mousePositionOnViewPortContent)}},i.mouseUpHandler=function(e,t){if(e.viewPortContentImageRect){var n=Pe.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=_e.getActiveRectLabel();if(i.startCreateRectPoint&&!ye.equals(i.startCreateRectPoint,n)){var o=Math.min(i.startCreateRectPoint.x,n.x),r=Math.min(i.startCreateRectPoint.y,n.y),s={x:o,y:r,width:Math.max(i.startCreateRectPoint.x,n.x)-o,height:Math.max(i.startCreateRectPoint.y,n.y)-r};i.addRectLabel(De.transferRectFromImageToViewPortContent(s,e),t)}if(i.startResizeRectAnchor&&a){var c=i.calculateRectRelativeToActiveImage(a.rect,e),l=ye.add(i.startResizeRectAnchor.position,e.viewPortContentImageRect),u=ye.subtract(n,l),d=Pe.resizeRect(c,i.startResizeRectAnchor.type,u),g=De.calculateImageScale(e),h=Pe.scaleRect(d,g),v=_e.getActiveImageData();v.labelRects=v.labelRects.map((function(e){return e.id===a.id?Object(x.a)(Object(x.a)({},e),{},{rect:h}):e})),t({labelRects:v.labelRects,labelPolygons:v.labelPolygons}),ne.dispatch(Re("0",v))}}i.endRectTransformation()},i.mouseMoveHandler=function(e){if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent&&(De.isMouseOverImage(e)&&!i.startResizeRectAnchor)){var t=i.getRectUnderMouse(e);t&&!i.isInProgress()?_e.getHighlightedLabelId()!==t.id&&ne.dispatch(be(t.id)):null!==_e.getHighlightedLabelId()&&ne.dispatch(be(null))}},i.addRectLabel=function(e,t){var n=_e.getActiveLabelNameId(),i=_e.getActiveImageData(),a={id:Fe.v4(),labelId:n,rect:e,status:He.ACCEPTED,suggestedLabel:null};i.labelRects.push(a),t({labelRects:i.labelRects,labelPolygons:i.labelPolygons}),ne.dispatch(Re("0",i)),ne.dispatch(Ie(a.id))},i.labelType=T.RECTANGLE,i}return Object(L.a)(n,[{key:"render",value:function(e){var t=this,n=_e.getActiveLabelId(),i=_e.getActiveImageData();i&&(i.labelRects.forEach((function(i){i.status===He.ACCEPTED&&i.id===n?t.drawActiveRect(i,e):t.drawInactiveRect(i,e)})),this.drawCurrentlyCreatedRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),this.updateCursorStyle(e))}},{key:"drawCurrentlyCreatedRect",value:function(e,t){if(this.startCreateRectPoint){var n=Pe.snapPointToRect(e,t),i={x:this.startCreateRectPoint.x,y:this.startCreateRectPoint.y,width:n.x-this.startCreateRectPoint.x,height:n.y-this.startCreateRectPoint.y},a=De.setRectBetweenPixels(i);Se.drawRect(this.canvas,a,this.config.lineActiveColor,this.config.lineThickness)}}},{key:"drawInactiveRect",value:function(e,t){var n=De.transferRectFromViewPortContentToImage(e.rect,t),i=_e.getHighlightedLabelId(),a=e.status===He.ACCEPTED&&e.id===i;this.renderRect(n,a)}},{key:"drawActiveRect",value:function(e,t){var n=this.calculateRectRelativeToActiveImage(e.rect,t);if(this.startResizeRectAnchor){var i=ye.add(this.startResizeRectAnchor.position,t.viewPortContentImageRect),a=Pe.snapPointToRect(t.mousePositionOnViewPortContent,t.viewPortContentImageRect),o=ye.subtract(a,i);n=Pe.resizeRect(n,this.startResizeRectAnchor.type,o)}var r=Pe.translate(n,t.viewPortContentImageRect);this.renderRect(r,!0)}},{key:"renderRect",value:function(e,t){var n=this,i=De.setRectBetweenPixels(e),a=t?this.config.lineActiveColor:this.config.lineInactiveColor;(Se.drawRect(this.canvas,i,a,this.config.lineThickness),t)&&Pe.mapRectToAnchors(e).map((function(e){return e.position})).forEach((function(e){var t=Pe.getRectWithCenterAndSize(e,n.config.anchorSize),i=De.setRectBetweenPixels(t);Se.drawRectWithFill(n.canvas,i,n.config.activeAnchorColor)}))}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!de.getImageDragModeStatus()){var t=this.getRectUnderMouse(e);if(this.getAnchorUnderMouse(e)&&t&&t.status===He.ACCEPTED||this.startResizeRectAnchor)return void ne.dispatch(q(A.MOVE));De.isMouseOverCanvas(e)?(!De.isMouseOverImage(e)&&this.startCreateRectPoint?ne.dispatch(q(A.MOVE)):De.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"):this.canvas.style.cursor="default"}}},{key:"isInProgress",value:function(){return!!this.startCreateRectPoint||!!this.startResizeRectAnchor}},{key:"calculateRectRelativeToActiveImage",value:function(e,t){var n=De.calculateImageScale(t);return Pe.scaleRect(e,1/n)}},{key:"getRectUnderMouse",value:function(e){var t=_e.getActiveRectLabel();if(t&&this.isMouseOverRectEdges(t.rect,e))return t;for(var n=_e.getActiveImageData().labelRects,i=0;i<n.length;i++)if(this.isMouseOverRectEdges(n[i].rect,e))return n[i];return null}},{key:"isMouseOverRectEdges",value:function(e,t){var n=Pe.translate(this.calculateRectRelativeToActiveImage(e,t),t.viewPortContentImageRect),i={x:this.config.anchorHoverSize.width/2,y:this.config.anchorHoverSize.height/2},a=Pe.expand(n,i),o={x:-this.config.anchorHoverSize.width/2,y:-this.config.anchorHoverSize.height/2},r=Pe.expand(n,o);return Pe.isPointInside(a,t.mousePositionOnViewPortContent)&&!Pe.isPointInside(r,t.mousePositionOnViewPortContent)}},{key:"getAnchorUnderMouseByRect",value:function(e,t,n){for(var i=Pe.mapRectToAnchors(e),a=0;a<i.length;a++){var o=Pe.translate(Pe.getRectWithCenterAndSize(i[a].position,this.config.anchorHoverSize),n);if(t&&Pe.isPointInside(o,t))return i[a]}return null}},{key:"getAnchorUnderMouse",value:function(e){for(var t=_e.getActiveImageData().labelRects,n=0;n<t.length;n++){var i=this.calculateRectRelativeToActiveImage(t[n].rect,e),a=this.getAnchorUnderMouseByRect(i,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);if(a)return a}return null}},{key:"startRectCreation",value:function(e){this.startCreateRectPoint=e,ne.dispatch(Ie(null)),tt.setViewPortActionsDisabledStatus(!0)}},{key:"startRectResize",value:function(e){this.startResizeRectAnchor=e,tt.setViewPortActionsDisabledStatus(!0)}},{key:"endRectTransformation",value:function(){this.startCreateRectPoint=null,this.startResizeRectAnchor=null,tt.setViewPortActionsDisabledStatus(!1)}}]),n}(We),et=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"getMousePositionOnCanvasFromEvent",value:function(e,t){if(t&&e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return null}},{key:"getClientRect",value:function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}},{key:"getSize",value:function(e){if(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}}]),e}(),tt=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"mountSupportRenderingEngine",value:function(e){le.supportRenderingEngine=e===T.RECTANGLE?new $e(le.canvas):new Ze(le.canvas)}},{key:"swapSupportRenderingEngine",value:function(t){e.mountSupportRenderingEngine(t)}},{key:"mountRenderEnginesAndHelpers",value:function(t){le.viewPortHelper=new me,le.primaryRenderingEngine=new Xe(le.canvas),e.mountSupportRenderingEngine(t)}},{key:"fullRender",value:function(){Se.clearCanvas(le.canvas),le.primaryRenderingEngine.render(),null===le||void 0===le||le.supportRenderingEngine.render(e.getEditorData())}},{key:"setLoadingStatus",value:function(e){le.isLoading=e}},{key:"setActiveImage",value:function(e){le.image=e}},{key:"setViewPortActionsDisabledStatus",value:function(e){le.viewPortActionsDisabled=e}},{key:"getEditorData",value:function(e){return{mousePositionOnViewPortContent:le.mousePositionOnViewPortContent,viewPortContentSize:et.getSize(le.canvas),event:e,zoom:de.getZoom(),viewPortSize:le.viewPortSize,defaultRenderImageRect:le.defaultRenderImageRect,viewPortContentImageRect:Ee.calculateViewPortContentImageRect(),realImageSize:ve.getSize(le.image),absoluteViewPortContentScrollPosition:Ee.getAbsoluteScrollPosition()}}},{key:"updateMousePositionIndicator",value:function(e){if(!le.image||!le.canvas)return le.mousePositionIndicator.style.display="none",void(le.cursor.style.display="none");var t=et.getMousePositionOnCanvasFromEvent(e,le.canvas),n=Ee.getAbsoluteScrollPosition(),i=Ee.calculateViewPortContentImageRect(),a=ye.subtract(t,n),o=Pe.isPointInside(i,t);if(Pe.isPointInside(Object(x.a)({x:0,y:0},le.viewPortSize),a)&&!de.getPreventCustomCursorStatus())if(le.cursor.style.left=a.x+"px",le.cursor.style.top=a.y+"px",le.cursor.style.display="block",o&&![A.GRAB,A.GRABBING].includes(de.getCustomCursorStyle())){var r=ve.getSize(le.image).width/i.width,s=ye.multiply(ye.subtract(t,i),r),c="x: "+Math.round(s.x)+", y: "+Math.round(s.y);le.mousePositionIndicator.innerHTML=c,le.mousePositionIndicator.style.left=a.x+15+"px",le.mousePositionIndicator.style.top=a.y+15+"px",le.mousePositionIndicator.style.display="block"}else le.mousePositionIndicator.style.display="none";else le.cursor.style.display="none",le.mousePositionIndicator.style.display="none"}}]),e}(),nt=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,null,[{key:"loadImage",value:function(e,t,n){return new Promise((function(i,a){var o=URL.createObjectURL(e),r=new Image;r.src=o,r.onload=function(){t(r),i()},r.onerror=function(){n(),a()}}))}},{key:"loadLabelsList",value:function(e,t,n){var i=new FileReader;i.readAsText(e),i.onloadend=function(e){var n=e.target.result;t(n.split(/[\r\n]/))},i.onerror=function(){return n()}}}]),e}(),it=function(){},at=function(e){var t=e.imageData,n=e.annotationType,i=e.imageDragMode,a=e.onLabelsDataChange,o=void 0===a?it:a;Object(s.useEffect)((function(){var e=function(e){var t=tt.getEditorData(e);le.mousePositionOnViewPortContent=et.getMousePositionOnCanvasFromEvent(e,le.canvas),le.primaryRenderingEngine.update(t),i?le.viewPortHelper.update(t):null===le||void 0===le||le.supportRenderingEngine.update(t,o),tt.updateMousePositionIndicator(e),tt.fullRender()};return window.addEventListener(I.MOUSE_MOVE,e),window.addEventListener(I.MOUSE_UP,e),le.canvas.addEventListener(I.MOUSE_DOWN,e),function(){window.removeEventListener(I.MOUSE_MOVE,e),window.removeEventListener(I.MOUSE_UP,e),le.canvas.removeEventListener(I.MOUSE_DOWN,e)}}),[i,o]),Object(s.useEffect)((function(){var e=function(){Ee.updateViewPortSize(),Ee.updateDefaultViewPortImageRect(),Ee.resizeViewPortContent(),tt.fullRender()};if(t.loadStatus)e();else if(!le.isLoading){tt.setLoadingStatus(!0);nt.loadImage(t.fileData,(function(n){return function(t,n){n.loadStatus=!0,tt.setActiveImage(t),tt.setLoadingStatus(!1),e()}(n,t)}),it)}}),[t]),Object(s.useEffect)((function(){tt.mountRenderEnginesAndHelpers(n)}),[n])},ot={x:.5,y:.5},rt=function(e){return{customCursorStyle:e.general.customCursorStyle,imageDragMode:e.general.imageDragMode}},st=function(e){return e.preventDefault()},ct=function(){},lt=function(e){var t=e.annotationType,n=e.className,i=e.imageFile,a=e.labels,o=e.onChange,r=void 0===o?ct:o,l=e.zoom,u=void 0===l?1:l,d=e.isImageDrag,g=void 0!==d&&d,h=Object(s.useMemo)((function(){return Object(x.a)({fileData:i,loadStatus:!1},a)}),[i,a]),v=Object(k.b)();Object(s.useEffect)((function(){v(function(e){return{type:b.ADD_IMAGES_DATA,payload:{imageData:e}}}([h]))}),[v,h,i]),Object(s.useEffect)((function(){var e;v((e=g,{type:b.UPDATE_IMAGE_DRAG_MODE_STATUS,payload:{imageDragMode:e}}))}),[v,g]),Object(s.useEffect)((function(){var e;v((e=t,{type:b.UPDATE_ACTIVE_LABEL_TYPE,payload:{activeLabelType:e}})),v(Ie(null))}),[v,t]),function(e){var t=Object(s.useRef)(!1);Object(s.useEffect)((function(){if(t.current){if(le.viewPortActionsDisabled)return;var n=de.getZoom(),i=Ee.getRelativeScrollPosition(),a=1===n?ot:i;Ee.setZoom(e),Ee.resizeViewPortContent(),Ee.setScrollPosition(Ee.calculateAbsoluteScrollPosition(a)),tt.fullRender()}else t.current=!0}),[e])}(u);var f=Object(k.c)(rt,G.a).customCursorStyle;return at({imageData:h,annotationType:t,imageDragMode:g,onLabelsDataChange:r}),c.a.createElement(dt,{className:n},c.a.createElement(ut,null,h&&c.a.createElement(ft,{ref:function(e){return le.editor=e},draggable:!1},c.a.createElement(H.a,{ref:function(e){return le.viewPortScrollbars=e},renderTrackHorizontal:function(e){return c.a.createElement(yt,Object.assign({},e))},renderTrackVertical:function(e){return c.a.createElement(yt,Object.assign({},e))},draggable:!1},c.a.createElement(gt,{ref:function(e){return le.canvas=e},draggable:!1,onContextMenu:st})),c.a.createElement(ht,{ref:function(e){return le.mousePositionIndicator=e},draggable:!1}),c.a.createElement(vt,{isGrabbing:f===A.GRABBING,isTransform:f!==A.DEFAULT,ref:function(e){return le.cursor=e},draggable:!1},c.a.createElement(ce,{d:re[f]})))))},ut=j.a.div({display:"flex",flexDirection:"column",width:"100%",height:"100%",alignSelf:"stretch"}),dt=j.a.div({height:"100%",width:"100%",alignSelf:"stretch",display:"flex",flexDirection:"column"}),gt=j.a.canvas(Ye||(Ye=J()),{position:"absolute",cursor:"none"}),ht=j.a.div(Je||(Je=Y()),{userSelect:"none",pointerEvents:"none"},{position:"absolute",color:"#fff",opacity:"0.75",padding:"0.25rem"},{backgroundColor:"#4a5568",zIndex:"50"}),vt=j.a.div(Ke||(Ke=X()),{position:"absolute",width:"0.5rem",height:"0.5rem",color:"#fff",fill:"currentColor"},{pointerEvents:"none",zIndex:"40"},{borderColor:"#fff",backgroundColor:"#fff",borderRadius:"9999px"},{transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms"},Object(F.a)("isTransform",{borderWidth:"1px",backgroundColor:"transparent","--transform-translate-x":"0","--transform-translate-y":"0","--transform-rotate":"0","--transform-skew-x":"0","--transform-skew-y":"0","--transform-scale-x":"3.5","--transform-scale-y":"3.5",transform:"translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))"}),Object(F.a)("isGrabbing",{"--transform-scale-x":"2.5","--transform-scale-y":"2.5"})),ft=j.a.div(qe||(qe=Z()),{flexGrow:"1",position:"relative"}),yt=j.a.div(Qe||(Qe=W()),{pointerEvents:"none"}),Pt=dt;ie.init();var Ct=function(e){return c.a.createElement(k.a,{store:ne},c.a.createElement(lt,Object.assign({},e)))},Et=(m={},Object(D.a)(m,T.POLYGON,T.POLYGON),Object(D.a)(m,T.RECTANGLE,T.RECTANGLE),m);function Ot(){var e=Object(i.a)(["\n  ","\n  "," {\n    ","\n  }\n"]);return Ot=function(){return e},e}var mt=[Et.RECTANGLE,Et.POLYGON],At=a.b.div(Ot(),{display:"flex",paddingTop:"0.5rem",paddingBottom:"0.5rem",width:"100%",justifyContent:"center",alignItems:"center"},R.className,{marginLeft:"0.5rem",marginRight:"0.5rem"}),Tt=function(e){var t=e.onChange,n=Object(s.useState)(mt[0]),i=Object(v.a)(n,2),a=i[0],o=i[1],r=Object(s.useCallback)((function(e){return function(){t(e),o(e)}}),[t]);return c.a.createElement(At,null,c.a.createElement("h1",null,"Annotation Type"),mt.map((function(e){return c.a.createElement(R,{key:e,onClick:r(e),isPressed:e===a},e)})))},It=(n(71),n(43)),bt=n.n(It);function Rt(){var e=Object(i.a)(["\n  ","\n"]);return Rt=function(){return e},e}function _t(){var e=Object(i.a)(["\n  ","\n  "," {\n    ","\n  }\n"]);return _t=function(){return e},e}var wt={labelRects:[],labelPolygons:[]},St=a.b.main(_t(),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden"},Pt,{borderWidth:"1px",borderColor:"#a0aec0"}),pt=a.b.div(Rt(),{display:"grid",gridAutoFlow:"column",gap:"0.5rem",margin:"0.5rem"}),Dt=function(){var e=Object(s.useState)(wt),t=Object(v.a)(e,2),n=t[0],i=t[1],a=Object(s.useState)(Et.RECTANGLE),o=Object(v.a)(a,2),r=o[0],l=o[1],u=Object(s.useState)(null),d=Object(v.a)(u,2),f=d[0],y=d[1],P=Object(s.useReducer)((function(e){return!e}),!1),C=Object(v.a)(P,2),E=C[0],O=C[1],m=Object(s.useState)(1),A=Object(v.a)(m,2),T=A[0],I=A[1],b=Object(s.useMemo)((function(){return{default:function(){return I(1)},maxZoom:function(){return I(2)},zoom:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){return I((function(t){return t+.1*(e?1:-1)}))}}}}),[]);return Object(s.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t,n,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(bt.a);case 2:return t=e.sent,e.next=5,t.arrayBuffer();case 5:n=e.sent,i=new File([n],"img.jpg",{type:"image/jpg"}),y(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){console.log(n)}),[n]),c.a.createElement(St,null,c.a.createElement(pt,null,c.a.createElement(R,{onClick:b.zoom()},"Zoom In"),c.a.createElement(R,{onClick:b.zoom(!1)},"Zoom Out"),c.a.createElement(R,{onClick:b.default},"Default Zoom"),c.a.createElement(R,{onClick:b.maxZoom},"Zoom Max"),c.a.createElement(R,{isPressed:E,onClick:O,disabled:1===T},"Drag Image (Only on zoomed image)")),f&&c.a.createElement(Ct,{zoom:T,imageFile:f,labels:n,onChange:i,annotationType:r,isImageDrag:E}),c.a.createElement(Tt,{onChange:l}))};u.a.render(c.a.createElement(c.a.Fragment,null,c.a.createElement(r,null),c.a.createElement(Dt,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b0910bff.chunk.js.map